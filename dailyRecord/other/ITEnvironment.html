<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>信创环境 | Roman&#39;s Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Blog/images/logo.png">
    <meta name="description" content="📝每天记录一点点">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.97ce9fae.css" as="style"><link rel="preload" href="/Blog/assets/js/app.d6f4b6a2.js" as="script"><link rel="preload" href="/Blog/assets/js/2.fd75a44f.js" as="script"><link rel="preload" href="/Blog/assets/js/11.6c4cb71a.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.ef8ad2af.js"><link rel="prefetch" href="/Blog/assets/js/12.bf292e9a.js"><link rel="prefetch" href="/Blog/assets/js/13.27d3af28.js"><link rel="prefetch" href="/Blog/assets/js/14.c90a7c8e.js"><link rel="prefetch" href="/Blog/assets/js/15.d1fb7a7e.js"><link rel="prefetch" href="/Blog/assets/js/16.090affc6.js"><link rel="prefetch" href="/Blog/assets/js/17.4e5df8a3.js"><link rel="prefetch" href="/Blog/assets/js/18.db68a2d0.js"><link rel="prefetch" href="/Blog/assets/js/19.78ffae18.js"><link rel="prefetch" href="/Blog/assets/js/20.326bfd19.js"><link rel="prefetch" href="/Blog/assets/js/21.4bc7c7af.js"><link rel="prefetch" href="/Blog/assets/js/22.d5f7595c.js"><link rel="prefetch" href="/Blog/assets/js/23.e48ece5c.js"><link rel="prefetch" href="/Blog/assets/js/24.4c1ca19a.js"><link rel="prefetch" href="/Blog/assets/js/25.97fa940f.js"><link rel="prefetch" href="/Blog/assets/js/26.acb8e14e.js"><link rel="prefetch" href="/Blog/assets/js/27.4233a341.js"><link rel="prefetch" href="/Blog/assets/js/28.a2ff22a3.js"><link rel="prefetch" href="/Blog/assets/js/29.6016abd9.js"><link rel="prefetch" href="/Blog/assets/js/3.c01d88b2.js"><link rel="prefetch" href="/Blog/assets/js/30.61781442.js"><link rel="prefetch" href="/Blog/assets/js/31.c4b84ed1.js"><link rel="prefetch" href="/Blog/assets/js/32.e426325a.js"><link rel="prefetch" href="/Blog/assets/js/33.90e060c3.js"><link rel="prefetch" href="/Blog/assets/js/34.7059796b.js"><link rel="prefetch" href="/Blog/assets/js/35.53956048.js"><link rel="prefetch" href="/Blog/assets/js/36.b2e386ad.js"><link rel="prefetch" href="/Blog/assets/js/37.8918b02a.js"><link rel="prefetch" href="/Blog/assets/js/38.16fe91ea.js"><link rel="prefetch" href="/Blog/assets/js/39.1a8073b2.js"><link rel="prefetch" href="/Blog/assets/js/4.accf9f2c.js"><link rel="prefetch" href="/Blog/assets/js/40.3383d598.js"><link rel="prefetch" href="/Blog/assets/js/41.85fae2a9.js"><link rel="prefetch" href="/Blog/assets/js/42.0404369c.js"><link rel="prefetch" href="/Blog/assets/js/43.bde5e9e5.js"><link rel="prefetch" href="/Blog/assets/js/44.babab1d1.js"><link rel="prefetch" href="/Blog/assets/js/45.3fa179d9.js"><link rel="prefetch" href="/Blog/assets/js/46.b3b4f85b.js"><link rel="prefetch" href="/Blog/assets/js/47.6759b2e2.js"><link rel="prefetch" href="/Blog/assets/js/48.64cdfd94.js"><link rel="prefetch" href="/Blog/assets/js/49.d58826b4.js"><link rel="prefetch" href="/Blog/assets/js/5.422be1ef.js"><link rel="prefetch" href="/Blog/assets/js/6.12713950.js"><link rel="prefetch" href="/Blog/assets/js/7.7a16dec8.js"><link rel="prefetch" href="/Blog/assets/js/8.10f0167f.js"><link rel="prefetch" href="/Blog/assets/js/9.e1456e0e.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.97ce9fae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">Roman's Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/dailyRecord/" class="nav-link router-link-active">
  📚学习总结
</a></div><div class="nav-item"><a href="/Blog/bookmark/" class="nav-link">
  📌书签整理
</a></div><div class="nav-item"><a href="/Blog/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Roman-29" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔗Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/dailyRecord/" class="nav-link router-link-active">
  📚学习总结
</a></div><div class="nav-item"><a href="/Blog/bookmark/" class="nav-link">
  📌书签整理
</a></div><div class="nav-item"><a href="/Blog/lint/" class="nav-link">
  ✔️编码规范&amp;协同开发
</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Roman-29" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔗Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3源码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单元测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端模块化和打包工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内功修炼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端异常监控</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/dailyRecord/other/ITEnvironment.html" aria-current="page" class="active sidebar-link">信创环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#主流信创平台" class="sidebar-link">主流信创平台</a></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#平台选型和资源预估" class="sidebar-link">平台选型和资源预估</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#分析项目需求" class="sidebar-link">分析项目需求</a></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#选型" class="sidebar-link">选型</a></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#合理预估资源" class="sidebar-link">合理预估资源</a></li></ul></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#部署方案和实施" class="sidebar-link">部署方案和实施</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#单机多进程" class="sidebar-link">单机多进程</a></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#多机集群" class="sidebar-link">多机集群</a></li></ul></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#性能与稳定性调优" class="sidebar-link">性能与稳定性调优</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#常见性能瓶颈原因" class="sidebar-link">常见性能瓶颈原因</a></li><li class="sidebar-sub-header"><a href="/Blog/dailyRecord/other/ITEnvironment.html#常见优化手段" class="sidebar-link">常见优化手段</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="信创环境"><a href="#信创环境" class="header-anchor">#</a> 信创环境</h1> <h2 id="主流信创平台"><a href="#主流信创平台" class="header-anchor">#</a> 主流信创平台</h2> <p>随着信创类相关政策的陆续出台, 政府逐步开展信创工作. 在日常工作中有可能会涉及到相关内容.</p> <p>下图为目前主流的信创平台</p> <p><img src="/Blog/assets/img/1.bf65b576.png" alt="image"></p> <h2 id="平台选型和资源预估"><a href="#平台选型和资源预估" class="header-anchor">#</a> 平台选型和资源预估</h2> <p>如何对信创软硬件平台进行合理选型和预估</p> <h3 id="分析项目需求"><a href="#分析项目需求" class="header-anchor">#</a> 分析项目需求</h3> <p><strong>部署与集成需求</strong></p> <ol><li><p>软硬件平台部署需求, 是否明确系统, 芯片, 数据库, 中间件等</p></li> <li><p>部署于涉密环境还是通用环境</p></li> <li><p>独立部署, 嵌入已有系统, 集成三方设施或应用</p></li></ol> <p><strong>功能需求</strong></p> <ol><li><p>地图, 数据, 三维等基础功能</p></li> <li><p>空间分析, 网络分析, 空间处理分析等</p></li> <li><p>分布式分析, 机器学习, 区块链等</p></li></ol> <p><strong>质量需求</strong></p> <ol><li><p>支撑用户数量, 设备并发数</p></li> <li><p>数据的量级(瓦片数据, 空间数据)</p></li> <li><p>响应时间</p></li> <li><p>安全性需求</p></li></ol> <h3 id="选型"><a href="#选型" class="header-anchor">#</a> 选型</h3> <p>如果没有明确相关选型, 根据相关平台的成熟度, 按优先级排序选型:</p> <ul><li><p>CPU 架构: ARM(鲲鹏/飞腾) &gt; MIPS(龙芯) &gt; X86(兆芯/海光) &gt; SW-64(申威)</p></li> <li><p>操作系统选择与 CPU 架构适配的系统</p></li> <li><p>Web 中间件: TongWeb(东方通) &gt; Apusic(金蝶) &gt; InfoSuite(中创)</p></li> <li><p>数据库: 瀚高 &gt; 达梦 &gt; 高斯 &gt; 人大金仓 &gt; 神舟通用,南大通用 &gt; 浪潮 K-DB</p></li></ul> <p>在&quot;强信创类&quot;应用中, 需要各个平台都是信创类平台, 考虑到相互的兼容性, 按下表推荐:</p> <p><img src="/Blog/assets/img/2.675b6c59.png" alt="image"></p> <h3 id="合理预估资源"><a href="#合理预估资源" class="header-anchor">#</a> 合理预估资源</h3> <ol><li>功能</li></ol> <ul><li><p>强计算类: 动态出图, 叠加分析等需要消耗 CPU 和内存资源</p></li> <li><p>强 IO 类: 瓦片发布, 空间查询, 地址匹配等, 硬盘 IO 要求高</p></li></ul> <ol start="2"><li>响应时间</li></ol> <ul><li>响应时间越低, 资源要求越高, 涉及到计算资源和网络带宽</li></ul> <ol start="3"><li>并发用户数</li></ol> <p>不同功能并发要求不同, 用户越多资源要求越高, 涉及 CPU, 内存, 网络带宽</p> <h4 id="预估计算资源-cpu-和内存"><a href="#预估计算资源-cpu-和内存" class="header-anchor">#</a> 预估计算资源(CPU 和内存)</h4> <p>通过 GIS 功能+并发请求数进行综合评估</p> <ul><li><p>瓦片出图 1 核 CPU 支持 30 个并发, 动态出图 1 核 CPU 支持 5 个并发</p></li> <li><p>空间查询 1 核 CPU 支持 8 个并发, 空间分析 1 核 CPU 支持 5 个并发</p></li></ul> <p>CPU 和内存比例</p> <ul><li>1:2(低配) 如 16C(32G), 1:4(高配) 如 16C(64G)</li></ul> <p>多种功能的资源需求, 按功能累加</p> <ul><li>300 并发瓦片出图, 25 并发动态出图, 40 并发空间查询</li> <li>CPU(核) = 300/30 + 25/5 + 40/8 = 20</li> <li>内存 = 20 _ 2 = 40G 低配 或 20 _ 4 = 80G 高配</li></ul> <h4 id="预估存储资源-硬盘-nas"><a href="#预估存储资源-硬盘-nas" class="header-anchor">#</a> 预估存储资源(硬盘/NAS)</h4> <p>数据量 _ 副本数 _ 缓冲比例</p> <ul><li>缓冲比例: 1.5(低配) 2(高配)</li> <li>数据量 5T, 3 副本, 缓存比例 2</li> <li>磁盘容量 = 5 _ 3 _ 2 (30T)</li></ul> <p>数据副本如何计算</p> <ul><li>由磁盘 IO 需求和磁盘 IO 能力决定</li> <li>磁盘 IO 需要 300M/s, 磁盘 IO 能力为 100M/s</li> <li>副本数 = 300 / 100 = 3 副本</li></ul> <h4 id="预估网络带宽"><a href="#预估网络带宽" class="header-anchor">#</a> 预估网络带宽</h4> <p>由系统各个功能的网络带宽需求累加</p> <ul><li>地图瓦片 30M/s, 三维瓦片 80M/s, 空间查询 5M/s</li> <li>网络带宽总需求 = 30 + 80 + 5 = 115M/s</li></ul> <p>单个功能网络带宽需求由并发数和响应时间决定</p> <ul><li>单个瓦片 30KB, 5000 个并发, 响应时间 0.5s</li> <li>网络带宽总需求 = 30KB _ 5000 _ (1/0.5) = 292M/s</li></ul> <h2 id="部署方案和实施"><a href="#部署方案和实施" class="header-anchor">#</a> 部署方案和实施</h2> <h3 id="单机多进程"><a href="#单机多进程" class="header-anchor">#</a> 单机多进程</h3> <p><img src="/Blog/assets/img/3.7c7e53e4.png" alt="image"></p> <p><img src="/Blog/assets/img/4.58ac68fa.png" alt="image"></p> <h3 id="多机集群"><a href="#多机集群" class="header-anchor">#</a> 多机集群</h3> <p><img src="/Blog/assets/img/5.5a0240a8.png" alt="image"></p> <p><img src="/Blog/assets/img/6.d47a2c43.png" alt="image"></p> <h2 id="性能与稳定性调优"><a href="#性能与稳定性调优" class="header-anchor">#</a> 性能与稳定性调优</h2> <h3 id="常见性能瓶颈原因"><a href="#常见性能瓶颈原因" class="header-anchor">#</a> 常见性能瓶颈原因</h3> <h4 id="资源使用瓶颈"><a href="#资源使用瓶颈" class="header-anchor">#</a> 资源使用瓶颈</h4> <ul><li><p>查询 CPU 使用情况(top/xmstat). 并发访问动态出图, 空间分析等计算密集型功能容易导致 CPU 资源不足</p></li> <li><p>查询内存使用情况(top/free). 网络分析模型过大, 发布服务过多等原因造成的内存不足</p></li> <li><p>查询磁盘 IO(iostat/vmstat). 瓦片请求过多, 导致的磁盘 IO 性能瓶颈</p></li> <li><p>查询网络带宽(ifstat/)</p></li></ul> <h4 id="运行环境设置不当"><a href="#运行环境设置不当" class="header-anchor">#</a> 运行环境设置不当</h4> <ul><li><p>jvm 堆设置过小</p></li> <li><p>web 中间件设置不当</p></li></ul> <h4 id="地图服务器使用不当"><a href="#地图服务器使用不当" class="header-anchor">#</a> 地图服务器使用不当</h4> <ul><li><p>发布服务过多, 以及不适当的缓存设置</p></li> <li><p>工作节点过少, 或节点资源分配不足(iserver)</p></li></ul> <h4 id="数据问题"><a href="#数据问题" class="header-anchor">#</a> 数据问题</h4> <ul><li><p>发布服务数据过大</p></li> <li><p>要素复杂或图层过多</p></li> <li><p>未构建空间索引</p></li></ul> <h3 id="常见优化手段"><a href="#常见优化手段" class="header-anchor">#</a> 常见优化手段</h3> <h4 id="加资源"><a href="#加资源" class="header-anchor">#</a> 加资源</h4> <ul><li>升级 CPU 提示计算能力</li> <li>升级内存提升实时数据处理能力</li> <li>升级磁盘提升 IO 能力</li> <li>升级网卡/网络提升带宽</li></ul> <h4 id="调架构"><a href="#调架构" class="header-anchor">#</a> 调架构</h4> <ul><li><p>单机多进程部署, 充分利用单机的性能</p></li> <li><p>多机集群部署</p></li></ul> <h4 id="优化配置"><a href="#优化配置" class="header-anchor">#</a> 优化配置</h4> <ul><li><p>优化 jvm 参数</p></li> <li><p>优化 web 中间件设置, 增大备用链接线程数和最大连接线程数</p></li></ul> <h4 id="减少额外功能"><a href="#减少额外功能" class="header-anchor">#</a> 减少额外功能</h4> <ul><li><p>关闭 jar/tld 扫描(JarScanner)</p></li> <li><p>关闭文件变更监控(WatchedResource)</p></li> <li><p>关闭请求访问日志(AccessLog)</p></li> <li><p>关闭响应体自动压缩(Compression)</p></li> <li><p>去除不必要的默认 web 应用</p></li></ul> <h4 id="优化地图服务器"><a href="#优化地图服务器" class="header-anchor">#</a> 优化地图服务器</h4> <ul><li><p>删除或停用多余的服务</p></li> <li><p>迁移数据到其他节点</p></li> <li><p>数据合并减少服务个数</p></li> <li><p>使用合适的缓存策略</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/29/2023, 2:39:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/dailyRecord/2020.html" class="prev">
        2020 项目经验总结
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.d6f4b6a2.js" defer></script><script src="/Blog/assets/js/2.fd75a44f.js" defer></script><script src="/Blog/assets/js/11.6c4cb71a.js" defer></script>
  </body>
</html>
