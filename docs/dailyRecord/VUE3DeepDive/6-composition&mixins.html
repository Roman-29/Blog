<html>
<div id="app"></div>
<script src="https://unpkg.com/vue@next"></script>
<script>
  // const { createApp } = Vue

  // const mouseMixin = {
  //   data() {
  //     return {
  //       x: 0,
  //       y: 0
  //     }
  //   },
  //   mounted() {
  //     window.addEventListener('mousemove', this.update)
  //   },
  //   methods: {
  //     update(e) {
  //       this.x = e.pageX;
  //       this.y = e.pageY
  //     }
  //   },
  //   unmounted() {
  //     window.removeEventListener('mousemove', this.update)
  //   }
  // }

  // const anotherMixin = {
  //   // 不同的mixin之间 属性的命名会有冲突的可能
  // }

  // const App = {
  //   template: `{{x}} {{y}}`,
  //   // 出现多个mixin的时候, 属性来自哪个mixin将不得而知
  //   mixins:[mouseMixin, anotherMixin]
  // }

  // createApp(App).mount('#app')
</script>
<script>
  const { createApp, ref, onMounted, onUnmounted } = Vue

  function useMouse() {
    const x = ref(0);
    const y = ref(0);

    const update = e => {
      x.value = e.pageX;
      y.value = e.pageY;
    }

    onMounted(() => {
      window.addEventListener('mousemove', update)
    })

    onUnmounted(() => {
      window.removeEventListener('mousemove', update)
    })
    return {
      x, y
    }
  }

  const useAnother = {
    // ...
  }

  const App = {
    template: `{{x}} {{y}}`,
    setup() {
      const { x, y } = useMouse()
      return {
        x, y
      }
    }
  }

  createApp(App).mount('#app')
</script>

</html>